# 算法-红黑树

学算法的时候大多会听说，问什么数据结构最难，一般回答是“最难不过二叉树”。二叉树内容十分丰富，简单罗列成以下内容：

- 满二叉树，完全二叉树（树高lgn+1）
- 二叉检索树，包括基本操作，插入删除检索等
- AVL平衡二叉树
- 红黑树
- 2-3树，B树

其中最具代表性的是红黑树，实际用的也非常广泛，在C++的STL中容器map就是用红黑树实现，一些操作系统中的文件管理用的也是红黑树。
本文主要介绍红黑树，及其相关操作，包括插入，删除，检索等

## 定义和性质

定义：  
- 每个节点只有红黑两种颜色
- 根节点黑色
- 如果一个节点是红色的，它的孩子节点都是黑色的
- 任意节点到后代叶子节点的简单路径中，均包含相同数目的黑色节点

注：
> 在算法导论书中，定义还有一条，“每个叶子（NIL）节点都是黑色的”。如果严格按照书上的实现的话，最坏情况下叶子节点NIL的个数为$2^(2lg(n+1)-1)$。
尽管加上叶子节点NIL会使得分析更加的简单，但却会带来额外NIL节点的存储开销。所以我在编程过程中，避免了NIL的使用，仍然满足上述定义。这也导致了不能完全按照书上的代码写，
因为它的伪码都是基于叶子节点为NIL的情况下来写的，我们需要在此基础上添加一些边界判断条件。

性质：
- 红黑树的高度至多为2lg(n+1)
    - 证明可由定义第三条，推广，即根到叶节点的任何一条简单路径上都至少有一半的节点为黑色

黑高的定义：
- 节点x出发（不含该节点）到达一个叶节点的任意一条简单路径上的黑色节点个数称为该节点的黑高。

## 插入

插入的节点颜色标为红色，共分为以下6种case：

- 父节点为左孩子
    - 叔节点为红色
    - 叔节点为黑色
        - 插入节点或当前节点为右孩子
        - 插入节点或当前节点为左孩子
- 父节点为右孩子
    - 叔节点为红色
    - 叔节点为黑色
        - 插入节点或当前节点为左孩子
        - 插入节点或当前节点为右孩子

case 1，4：重新着色
case 2，5：旋转父亲节点
case 3，6：旋转祖先节点，后重新着色

## 删除

